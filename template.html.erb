<!doctype html>
<html>
  <head>
    <title>Books to read on Goodreads</title>
    <meta charset="utf-8">
    <meta name="generator" content="what2read - https://github.com/agorf/what2read">
    <style>
      body { font-family: sans-serif; }
      a img { border: none }
      .align-center { text-align: center; }
      .align-right { text-align: right; }
    </style>
  </head>
  <body>
    <table>
      <tr>
        <th>Rank</th>
        <th>Cover</th>
        <th>Title</th>
        <th>Authors</th>
        <th>Score</th>
        <th>Average Rating</th>
        <th>Ratings</th>
      </tr>
      <% books.each.with_index(1) do |book, rank| %>
        <tr>
          <td class="align-right"><%= rank %></td>
          <td>
            <a href="<%= book.link %>"><img <%= rank > 20 ? 'data-normal' : 'src' %>="<%= book.cover_url %>" alt="cover" width="43"></a>
          </td>
          <td><%= book.title %></td>
          <td><%= book.authors.join(', ') %></td>
          <td class="align-center"><%= '%.2f' % book.score if book.score > 0 %></td>
          <td class="align-center"><%= '%.2f' % book.average_rating %></td>
          <td class="align-right"><%= book.ratings_count %></td>
        </tr>
      <% end %>
      <script src="https://unpkg.com/layzr.js@2.2.2/dist/layzr.js"></script>
      <script>
        document.addEventListener('DOMContentLoaded', function(event) {
          Layzr().update().check().handlers(true)
        })
      </script>
    </table>
  </body>
</html>
